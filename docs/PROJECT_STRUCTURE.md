# 项目结构说明

## 概述

本项目采用Go标准项目结构，遵循Go生态系统的最佳实践。项目结构清晰，职责分离明确，便于维护和扩展。

## 目录结构

```
goBlog/
├── server/                    # 后端服务
│   ├── cmd/server/           # 应用程序入口点
│   │   └── main.go          # 主程序入口
│   ├── internal/             # 私有应用程序和库代码
│   │   ├── api/             # API层 - HTTP处理器
│   │   ├── service/         # 业务逻辑层
│   │   ├── model/           # 数据模型
│   │   ├── middleware/      # 中间件
│   │   ├── router/          # 路由配置
│   │   ├── initialize/      # 初始化模块
│   │   └── task/            # 定时任务
│   ├── pkg/                 # 可重用库代码
│   │   ├── config/          # 配置管理
│   │   ├── utils/           # 工具函数
│   │   ├── global/          # 全局变量
│   │   └── core/            # 核心功能
│   ├── configs/             # 配置文件
│   ├── scripts/             # 脚本文件
│   ├── log/                 # 日志文件
│   └── uploads/             # 上传文件
├── web/                     # 前端应用
└── docs/                    # 项目文档
```

## 详细说明

### cmd/server/
- **用途**: 应用程序的入口点
- **内容**: 包含main.go文件，负责启动应用程序
- **特点**: 遵循Go标准，每个可执行程序都有自己的cmd目录

### internal/
- **用途**: 私有代码，不能被外部项目导入
- **特点**: Go编译器会强制阻止外部包导入internal目录下的代码

#### internal/api/
- **用途**: HTTP API处理器
- **职责**: 
  - 处理HTTP请求和响应
  - 参数验证
  - 调用service层处理业务逻辑
  - 返回JSON响应

#### internal/service/
- **用途**: 业务逻辑层
- **职责**:
  - 实现具体的业务逻辑
  - 调用repository层进行数据操作
  - 处理业务规则和验证

#### internal/model/
- **用途**: 数据模型定义
- **子目录**:
  - `database/`: 数据库模型（GORM结构体）
  - `request/`: 请求参数模型
  - `response/`: 响应数据模型
  - `appTypes/`: 应用类型定义
  - `elasticsearch/`: ES相关模型
  - `other/`: 其他模型

#### internal/middleware/
- **用途**: HTTP中间件
- **内容**:
  - JWT认证中间件
  - 日志记录中间件
  - 权限验证中间件
  - 登录记录中间件

#### internal/router/
- **用途**: 路由配置
- **职责**: 定义API路由和中间件

#### internal/initialize/
- **用途**: 初始化模块
- **职责**:
  - 数据库连接初始化
  - Redis连接初始化
  - Elasticsearch连接初始化
  - 定时任务初始化

#### internal/task/
- **用途**: 定时任务
- **职责**: 处理需要定期执行的任务

### pkg/
- **用途**: 可重用库代码，可以被外部项目导入
- **特点**: 这些代码可以被其他项目使用

#### pkg/config/
- **用途**: 配置管理
- **职责**: 读取和管理应用程序配置

#### pkg/utils/
- **用途**: 工具函数
- **内容**: 通用的工具函数和辅助方法

#### pkg/global/
- **用途**: 全局变量
- **内容**: 全局配置、数据库连接等

#### pkg/core/
- **用途**: 核心功能
- **内容**: 服务器启动、日志配置等核心功能

### configs/
- **用途**: 配置文件
- **内容**: YAML、JSON等配置文件

### scripts/
- **用途**: 脚本文件
- **内容**: 构建脚本、部署脚本、数据库脚本等

### log/
- **用途**: 日志文件
- **内容**: 应用程序运行日志

### uploads/
- **用途**: 上传文件
- **内容**: 用户上传的图片、文档等文件

## 设计原则

1. **关注点分离**: 每个目录都有明确的职责
2. **依赖倒置**: 高层模块不依赖低层模块
3. **单一职责**: 每个包只负责一个特定的功能
4. **开闭原则**: 对扩展开放，对修改关闭

## 导入规范

- `internal/` 下的包只能被项目内部导入
- `pkg/` 下的包可以被外部项目导入
- 导入路径使用完整的模块路径

## 最佳实践

1. **命名规范**: 使用清晰的目录和文件命名
2. **文档注释**: 为每个包和重要函数添加文档注释
3. **错误处理**: 统一的错误处理机制
4. **日志记录**: 适当的日志记录级别
5. **测试覆盖**: 为关键功能编写测试

## 扩展指南

当需要添加新功能时：

1. 确定功能属于哪个层次（api/service/model等）
2. 在对应的internal目录下创建文件
3. 如果是通用功能，考虑放在pkg目录下
4. 更新路由配置（如果需要）
5. 添加相应的测试
6. 更新文档 